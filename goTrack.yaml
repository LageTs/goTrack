# Config for goTrack. Shall be placed in /etc/ as goTrack.yaml
# Version of this config file
config_version: 1.8
# Shall the file lock be used?
file_lock: true
# If activated commands will only be executed if the file exists.
file_lock_inverted_mode: false
# File to be checked for file lock
file_lock_path: "/tmp/goTrack.lock"
# If true, the file lock will be deleted at start, before delay. Set false to use file_lock_creation
file_lock_deletion: true
# If true, the file lock will be created at start, before delay. Not compatible with file_lock_deletion = true
file_lock_creation: false
# Delay until start
start_delay: 3s
# Log file path - print if not existing
log_file: "/var/log/goTrack.log"
# Number of old log files to keep: 1 keeps current and last, 0 keeps current
old_logs: 1
# If true, in case of a handled unexpected error in tracking (like missing permissions), command execution will be started with callee of error source
execution_on_error: true
# Enable usb checking
usb_tracking: false
# Interval between checks
usb_interval: 1000ms
# IDs to be ignored
usb_ignored_ids:
  - "Test"
# Enable ping checking
ping_tracking: false
# Interval between checks
ping_interval: 10000ms
# Targets to ping
ping_targets:
  - target: "127.0.0.1" # Target to ping
    ping_timeout: 1s # Duration for ping to be identified as failed if no response in received
    on_success: false # Set true if commands shall be executed on successful ping
    retry_count: 3 # Number of retries if ping fails before command execution
    retry_delay: 100ms # Time to wait between retries
    command_id: -1 # ID for command binding, ignored unless commands are set up for ids
# Enable web checking
web_tracking: false
# Interval between checks
web_interval: 60000ms
# Targets to curl
web_targets:
  - target: "https://example.com" # Target to curl
    content: "Test" # Content to look for
    content_is_exact: false # Set true to execute command if responses body is identical to content. false if content is meant to be a substring.
    status_code: 200 # Http status code to look for
    on_code_identical: false # Set true to execute commands if received status code is same as configured status code
    on_https_fails: false # Set true to execute commands if response is received without encryption
    retry_count: 3 # Number of retries if curl fails before command execution
    retry_delay: 500ms # Time to wait between retires
    command_id: -1 # ID for command binding, ignored unless commands are set up for ids
# Enable time tracking
time_tracking: false
# Timestamps to react to
time_targets:
  - timestamp: "2000-01-20T12:31:00Z" # Timestamp as ISO 8601, UTC or with timezone (Z01:00 for UTC+1)
    tolerance_window: 1h # Time to also act after expiry. For example if time is set to today, midnight and tolerance_window is set to 24h, this will be executed even if the program starts later today. If set to 0 it will only be executed exactly, if set to -1 this will be executed regardless of elapsed time, if set to 30 Minutes it will be executed when timestamp was less than 30 Minutes before goTrack start.
    command_id: -1 # ID for command binding, ignored unless commands are set up for ids
# Enable interval tracking
interval_tracking: false
# Timestamps to react to
interval_targets:
  - interval: 1h
    start_at: "2000-01-20T12:31:00Z" # Timestamp as ISO 8601. Do not react before timestamp. Must be set correctly
    stop_at: "3000-01-20T12:31:00Z" # Timestamp as ISO 8601. Do not react after timestamp. Must be set correctly
    execute_on_start: false # If true, commands will be executed once at start and then every set duration.
    command_id: -1 # ID for command binding, ignored unless commands are set up for ids
# Commands to be executed
commands:
  - command: "shutdown" # Command
    args: # Arguments as strings
      - "0"
    late: true # Set true to execute commands after others
    usb: false # Set true to execute command on usb changes
    ping: false # Set true to execute command on ping tracking
    web: false # Set true to execute command on web tracking
    time: false # Set true to execute command on time tracking
    interval: false # Set true to execute command on interval tracking
    # command_id can also be seen as "only execute in combination with this id"
    command_id: -1 # If set to -1 this will be executed regardless of triggering target, if greater than -1 it will only be executed if triggering target has this command_id
