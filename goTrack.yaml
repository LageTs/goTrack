# Config for goTrack. Shall be placed in /etc/ as goTrack.yaml
# Version of this config file
config_version: 1.6
# Shall the file lock be used? If activated commands will only be executed if the file doesn't exist.
file_lock: true
# File to be checked for file lock
file_lock_path: "/tmp/goTrack.lock"
# If true, the file lock will be deleted at start, before delay
file_lock_deletion: true
# Delay until start
start_delay: 3s
# Log file path - print if not existing
log_file: "/var/log/goTrack.log"
# Number of old log files to keep: 1 keeps current and last, 0 keeps current
old_logs: 1
# If true, in case of a handled unexpected error in tracking (like missing permissions), command execution will be started with callee of error source
execution_on_error: true
# Enable usb checking
usb_tracking: false
# Interval between checks
usb_interval: 1000ms
# IDs to be ignored
usb_ignored_ids:
  - "Test"
# Enable ping checking
ping_tracking: false
# Interval between checks
ping_interval: 10000ms
# Targets to ping
ping_targets:
  - target: "127.0.0.1" # Target to ping
    ping_timeout: 1s # Duration for ping to be identified as failed if no response in received
    on_success: false # Set true if commands shall be executed on successful ping
    retry_count: 3 # Number of retries if ping fails before command execution
    retry_delay: 100ms # Time to wait between retries
    command_id: -1 # ID for command binding, ignored unless commands are set up for ids
# Enable web checking
web_tracking: false
# Interval between checks
web_interval: 60000ms
# Targets to curl
web_targets:
  - target: "https://example.com" # Target to curl
    content: "Test" # Content to look for
    content_is_exact: false # Set true to execute command if responses body is identical to content. false if content is meant to be a substring.
    status_code: 200 # Http status code to look for
    on_code_identical: false # Set true to execute commands if received status code is same as configured status code
    on_https_fails: false # Set true to execute commands if response is received without encryption
    retry_count: 3 # Number of retries if curl fails before command execution
    retry_delay: 500ms # Time to wait between retires
    command_id: -1 # ID for command binding, ignored unless commands are set up for ids
# Commands to be executed
commands:
  - command: "shutdown" # Command
    args: # Arguments as strings
      - "0"
    late: true # Set true to execute commands after others
    usb: false # Set true to execute command on usb changes
    ping: false # Set true to execute command on ping tracking
    web: false # Set true to execute command on web tracking
    # command_id can also be seen as "only execute in combination with this id"
    command_id: -1 # If set to -1 this will be executed regardless of triggering target, if greater than -1 it will only be executed if triggering target has this command_id